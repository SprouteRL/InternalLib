#include "exploit.h"

void Exploit(HINSTANCE instance) noexcept
{
	std::unique_ptr<Memory> memory = std::make_unique<Memory>("ac_client.exe");
	
	uintptr_t localPlayer = memory->ReadMemory<uintptr_t>(memory->baseAddr + storage::assault_cube::offset::localPlayerOffset);
	
	while (!GetAsyncKeyState(VK_END))
	{
		memory->WriteMemory(localPlayer + storage::assault_cube::offset::arAmmo, (int)1337);
		memory->WriteMemory(localPlayer + storage::assault_cube::offset::healthOffset, (int)1337);
	}

	FreeLibraryAndExitThread(instance, 0); // uninject basically, free the library and exit the thread (terminate the thread the dll is on)
}